DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698634
DEBUG:root:Last update id is 749698635
INFO:root:[MESSAGE] btseytlin: Hey
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 108, in on_message
    self.register_player(user)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 121, in register_player
    new_player = Player(None, None, None) #Create an empty player object
  File "D:\projects\dungeon_bot\creatures.py", line 33, in __init__
    Creature.__init__(self, name, race, combat_class, description, max_health. max_energy, health, energy)
AttributeError: 'int' object has no attribute 'max_energy'
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698634
DEBUG:root:Last update id is 749698635
INFO:root:[MESSAGE] btseytlin: Hey
DEBUG:root:<dungeon_bot.DungeonBot object at 0x0000000002A29780>
DEBUG:root:Got update with id 749698635
DEBUG:root:Last update id is 749698636
INFO:root:[MESSAGE] btseytlin: Ok
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 84, in start_main_loop
    updates = self.api.getUpdates(self.last_update_id)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 554, in getUpdates
    json_data = self._requestUrl(url, 'POST', data=data)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 623, in _requestUrl
    urllib.urlencode(data)
  File "C:\Python27\lib\urllib2.py", line 127, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 404, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 422, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 382, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1222, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1181, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "C:\Python27\lib\httplib.py", line 973, in request
    self._send_request(method, url, body, headers)
  File "C:\Python27\lib\httplib.py", line 1007, in _send_request
    self.endheaders(body)
  File "C:\Python27\lib\httplib.py", line 969, in endheaders
    self._send_output(message_body)
  File "C:\Python27\lib\httplib.py", line 829, in _send_output
    self.send(msg)
  File "C:\Python27\lib\httplib.py", line 791, in send
    self.connect()
  File "C:\Python27\lib\httplib.py", line 1176, in connect
    self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
  File "C:\Python27\lib\ssl.py", line 387, in wrap_socket
    ciphers=ciphers)
  File "C:\Python27\lib\ssl.py", line 143, in __init__
    self.do_handshake()
  File "C:\Python27\lib\ssl.py", line 305, in do_handshake
    self._sslobj.do_handshake()
KeyboardInterrupt
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698636
DEBUG:root:Last update id is 749698637
INFO:root:[MESSAGE] btseytlin: Hey bot
DEBUG:root:<dungeon_bot.DungeonBot object at 0x000000000296C748>
DEBUG:root:Got update with id 749698637
DEBUG:root:Last update id is 749698638
INFO:root:[MESSAGE] btseytlin: Boris
DEBUG:root:Got update with id 749698638
DEBUG:root:Last update id is 749698639
INFO:root:[MESSAGE] btseytlin: Orc
DEBUG:root:Got update with id 749698639
DEBUG:root:Last update id is 749698640
INFO:root:[MESSAGE] btseytlin: Warrior
DEBUG:root:Removing event 8cd81603
DEBUG:root:Event 8cd81603 removed
DEBUG:root:Got update with id 749698640
DEBUG:root:Last update id is 749698641
INFO:root:[MESSAGE] btseytlin: help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 115, in on_message
    words = message.split(' ')
AttributeError: 'Message' object has no attribute 'split'
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698640
DEBUG:root:Last update id is 749698641
INFO:root:[MESSAGE] btseytlin: help
DEBUG:root:<dungeon_bot.DungeonBot object at 0x00000000029EC748>
DEBUG:root:Got update with id 749698641
DEBUG:root:Last update id is 749698642
INFO:root:[MESSAGE] btseytlin: Boris
DEBUG:root:Got update with id 749698642
DEBUG:root:Last update id is 749698643
INFO:root:[MESSAGE] btseytlin: Orc
DEBUG:root:Got update with id 749698643
DEBUG:root:Last update id is 749698644
INFO:root:[MESSAGE] btseytlin: Warrior
DEBUG:root:Removing event d953f24d
DEBUG:root:Event d953f24d removed
DEBUG:root:Got update with id 749698644
DEBUG:root:Last update id is 749698645
INFO:root:[MESSAGE] btseytlin: Thanks bot
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 118, in on_message
    self.handle_command(user, command, *args)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 51, in handle_command
    if not command in allowed_commands.keys:
NameError: global name 'allowed_commands' is not defined
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698644
DEBUG:root:Last update id is 749698645
INFO:root:[MESSAGE] btseytlin: Thanks bot
DEBUG:root:<dungeon_bot.DungeonBot object at 0x0000000002B09748>
DEBUG:root:Got update with id 749698645
DEBUG:root:Last update id is 749698646
INFO:root:[MESSAGE] btseytlin: Boris
DEBUG:root:Got update with id 749698646
DEBUG:root:Last update id is 749698647
INFO:root:[MESSAGE] btseytlin: Orc
DEBUG:root:Got update with id 749698647
DEBUG:root:Last update id is 749698648
INFO:root:[MESSAGE] btseytlin: Warrior
DEBUG:root:Removing event 73327a96
DEBUG:root:Event 73327a96 removed
DEBUG:root:Got update with id 749698648
DEBUG:root:Last update id is 749698649
INFO:root:[MESSAGE] btseytlin: Thanks
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 118, in on_message
    self.handle_command(user, command, *args)
TypeError: handle_command() takes exactly 4 arguments (3 given)
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698648
DEBUG:root:Last update id is 749698649
INFO:root:[MESSAGE] btseytlin: Thanks
DEBUG:root:<dungeon_bot.DungeonBot object at 0x00000000029C9748>
DEBUG:root:Got update with id 749698649
DEBUG:root:Last update id is 749698650
INFO:root:[MESSAGE] btseytlin: S
DEBUG:root:Got update with id 749698650
DEBUG:root:Last update id is 749698651
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Got update with id 749698651
DEBUG:root:Last update id is 749698652
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Removing event 72257fd2
DEBUG:root:Event 72257fd2 removed
DEBUG:root:Got update with id 749698652
DEBUG:root:Last update id is 749698653
INFO:root:[MESSAGE] btseytlin: D
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 118, in on_message
    self.handle_command(user, command, *args)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 51, in handle_command
    if not command in self.allowed_commands.keys:
TypeError: argument of type 'builtin_function_or_method' is not iterable
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698652
DEBUG:root:Last update id is 749698653
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:<dungeon_bot.DungeonBot object at 0x0000000002A59748>
DEBUG:root:Got update with id 749698653
DEBUG:root:Last update id is 749698654
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Got update with id 749698654
DEBUG:root:Last update id is 749698655
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Got update with id 749698655
DEBUG:root:Last update id is 749698656
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Removing event 00ed017c
DEBUG:root:Event 00ed017c removed
DEBUG:root:Got update with id 749698656
DEBUG:root:Last update id is 749698657
INFO:root:[MESSAGE] btseytlin: H
DEBUG:root:Got update with id 749698657
DEBUG:root:Last update id is 749698658
INFO:root:[MESSAGE] btseytlin: help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 118, in on_message
    self.handle_command(user, command, *args)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 71, in handle_command
    commands_for_desc = commands_for_desc.join(", ")
AttributeError: 'list' object has no attribute 'join'
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698657
DEBUG:root:Last update id is 749698658
INFO:root:[MESSAGE] btseytlin: help
DEBUG:root:<dungeon_bot.DungeonBot object at 0x00000000029F9748>
DEBUG:root:Got update with id 749698658
DEBUG:root:Last update id is 749698659
INFO:root:[MESSAGE] btseytlin: Dp
DEBUG:root:Got update with id 749698659
DEBUG:root:Last update id is 749698660
INFO:root:[MESSAGE] btseytlin: S
DEBUG:root:Got update with id 749698660
DEBUG:root:Last update id is 749698661
INFO:root:[MESSAGE] btseytlin: D
DEBUG:root:Removing event c7dbee1a
DEBUG:root:Event c7dbee1a removed
DEBUG:root:Got update with id 749698661
DEBUG:root:Last update id is 749698662
INFO:root:[MESSAGE] btseytlin: Help
DEBUG:root:Got update with id 749698662
DEBUG:root:Last update id is 749698663
INFO:root:[MESSAGE] btseytlin: help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 95, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 118, in on_message
    self.handle_command(user, command, *args)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 75, in handle_command
    return self.api.sendMessage(user, help_text+pprint.pformat(allowed_comms))
  File "D:\projects\dungeon_bot\telegram\bot.py", line 118, in sendMessage
    json_data = self._requestUrl(url, 'POST', data=data)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 628, in _requestUrl
    raise TelegramError(str(e))
TelegramError: HTTP Error 400: Bad Request
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698662
DEBUG:root:Last update id is 749698663
INFO:root:[MESSAGE] btseytlin: help
DEBUG:root:<dungeon_bot.DungeonBot object at 0x0000000002A03748>
DEBUG:root:Got update with id 749698663
DEBUG:root:Last update id is 749698664
INFO:root:[MESSAGE] btseytlin: Me
DEBUG:root:Got update with id 749698664
DEBUG:root:Last update id is 749698665
INFO:root:[MESSAGE] btseytlin: Bot
DEBUG:root:Got update with id 749698665
DEBUG:root:Last update id is 749698666
INFO:root:[MESSAGE] btseytlin: Bot
DEBUG:root:Removing event de25e81f
DEBUG:root:Event de25e81f removed
DEBUG:root:Got update with id 749698666
DEBUG:root:Last update id is 749698667
INFO:root:[MESSAGE] btseytlin: help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 84, in start_main_loop
    for comms, desc in allowed_comms.iteritems():
  File "D:\projects\dungeon_bot\telegram\bot.py", line 554, in getUpdates
    json_data = self._requestUrl(url, 'POST', data=data)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 623, in _requestUrl
    urllib.urlencode(data)
  File "C:\Python27\lib\urllib2.py", line 127, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 404, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 422, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 382, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1222, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1187, in do_open
    r = h.getresponse(buffering=True)
  File "C:\Python27\lib\httplib.py", line 1045, in getresponse
    response.begin()
  File "C:\Python27\lib\httplib.py", line 409, in begin
    version, status, reason = self._read_status()
  File "C:\Python27\lib\httplib.py", line 365, in _read_status
    line = self.fp.readline(_MAXLINE + 1)
  File "C:\Python27\lib\socket.py", line 476, in readline
    data = self._sock.recv(self._rbufsize)
  File "C:\Python27\lib\ssl.py", line 241, in recv
    return self.read(buflen)
  File "C:\Python27\lib\ssl.py", line 160, in read
    return self._sslobj.read(len)
KeyboardInterrupt
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698667
DEBUG:root:Last update id is 749698668
INFO:root:[MESSAGE] btseytlin: Abc
DEBUG:root:<dungeon_bot.DungeonBot object at 0x00000000029AF748>
DEBUG:root:Got update with id 749698668
DEBUG:root:Last update id is 749698669
INFO:root:[MESSAGE] btseytlin: Abx
DEBUG:root:Got update with id 749698669
DEBUG:root:Last update id is 749698670
INFO:root:[MESSAGE] btseytlin: Abc
DEBUG:root:Got update with id 749698670
DEBUG:root:Last update id is 749698671
INFO:root:[MESSAGE] btseytlin: Abc
DEBUG:root:Removing event b365e00a
DEBUG:root:Event b365e00a removed
DEBUG:root:Got update with id 749698671
DEBUG:root:Last update id is 749698672
INFO:root:[MESSAGE] btseytlin: Help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 107, in start_main_loop
    self.on_message(message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 127, in on_message
    self.parse_command(user, message)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 54, in parse_command
    self.handle_command(user, command, *args)
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 84, in handle_command
    for comms, desc in allowed_comms.iteritems():
AttributeError: 'str' object has no attribute 'iteritems'
DEBUG:root:DungeonBot initialized
INFO:root:Telegram DungeonBot starting
DEBUG:root:Got update with id 749698671
DEBUG:root:Last update id is 749698672
INFO:root:[MESSAGE] btseytlin: Help
DEBUG:root:<dungeon_bot.DungeonBot object at 0x00000000029A6748>
DEBUG:root:Got update with id 749698672
DEBUG:root:Last update id is 749698673
INFO:root:[MESSAGE] btseytlin: Abc
DEBUG:root:Got update with id 749698673
DEBUG:root:Last update id is 749698674
INFO:root:[MESSAGE] btseytlin: Abc
DEBUG:root:Got update with id 749698674
DEBUG:root:Last update id is 749698675
INFO:root:[MESSAGE] btseytlin: Avc
DEBUG:root:Removing event 322d4c6f
DEBUG:root:Event 322d4c6f removed
DEBUG:root:Got update with id 749698675
DEBUG:root:Last update id is 749698676
INFO:root:[MESSAGE] btseytlin: Help
ERROR:root:Exception 
Traceback (most recent call last):
  File "D:\projects\dungeon_bot\main.py", line 18, in <module>
    dungeon_bot.start_main_loop()
  File "D:\projects\dungeon_bot\dungeon_bot.py", line 94, in start_main_loop
    updates = self.api.getUpdates(self.last_update_id)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 554, in getUpdates
    json_data = self._requestUrl(url, 'POST', data=data)
  File "D:\projects\dungeon_bot\telegram\bot.py", line 623, in _requestUrl
    urllib.urlencode(data)
  File "C:\Python27\lib\urllib2.py", line 127, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 404, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 422, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 382, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1222, in https_open
    return self.do_open(httplib.HTTPSConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1181, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)
  File "C:\Python27\lib\httplib.py", line 973, in request
    self._send_request(method, url, body, headers)
  File "C:\Python27\lib\httplib.py", line 1007, in _send_request
    self.endheaders(body)
  File "C:\Python27\lib\httplib.py", line 969, in endheaders
    self._send_output(message_body)
  File "C:\Python27\lib\httplib.py", line 829, in _send_output
    self.send(msg)
  File "C:\Python27\lib\httplib.py", line 791, in send
    self.connect()
  File "C:\Python27\lib\httplib.py", line 1176, in connect
    self.sock = ssl.wrap_socket(sock, self.key_file, self.cert_file)
  File "C:\Python27\lib\ssl.py", line 387, in wrap_socket
    ciphers=ciphers)
  File "C:\Python27\lib\ssl.py", line 143, in __init__
    self.do_handshake()
  File "C:\Python27\lib\ssl.py", line 305, in do_handshake
    self._sslobj.do_handshake()
KeyboardInterrupt
