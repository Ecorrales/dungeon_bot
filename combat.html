<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Contributing to dungeon bot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Contributing to dungeon bot</h1>
      <h2 class="project-tagline">Add items, monsters, perks, modifiers and more!</h2>
      <a href="https://github.com/Euphe/dungeon_bot" class="btn">View on GitHub</a>
    </section>

    <section class="main-content">
      <h1>Dice notation explained</h1>
      <p>If you are asking what does <code>"1d6"</code> mean you are in the right place.
      "1d6" means <em>"roll one dice of 6 sides"</em>, or in other words it means a random number between 1 and 6.
      "2d6" means a random number between 2 and 12.</p>
      <p>A negative dice, like "-1d6" means a negative number between 1 and 6. Usually if you see a negative range it's a penalty, for example an armor's penalty to evasion.</p>
      <h1>Combat explained</h1>
      <p>Combat is turn based. At the beginning of each round a turn qeue is formed out of alive creatures, creatures with most dexterity first, creatures with least dexterity.</p>
      <p>All creatures begin combat with their maximum energy. All abilities drain some amount of energy.
      Each round energy regenerates by the amount of the creature's <code>energy_regen</code>.</p>
      <p>Creatures use whatever abilities they have, then they end their turn and it's passed to the next creature in qeue.</p>
      <p>Most things are calculated via dice rolls.</p>
      <p>Attacks differ in their effectivity against different enemies thanks to the tags system.
      For example you are more likely to cause <code>knockdown</code> to a an armored enemy because of the <code>armor</code> tag.</p>
      <h2>Formulas</h2>
      <p>Here you can see how different things are counted.</p>
      <p>Health:</p>
      <pre><code>max_health = vitality*10 + vitality*self.level*4
      </code></pre>
      <p>Energy formulas:</p>
      <pre><code>max_energy = dexterity + int(level / 10)
      energy_regen = clamp(int(dexterity / 3) + int(level / 10), 2, 10)
      </code></pre>
      <p>Damage differs from ability to ability, but the main formula is:</p>
      <pre><code>damage =  weapon_dmg * strength - defence
      </code></pre>
      <p>Damage can never be lower than <code>strength/2</code>.</p>
      <p>Chance to hit:</p>
      <pre><code>chance_to_hit = accuracy - evasion
      </code></pre>
      <p>Can never be lower than 5 or higher than 95.</p>
      <p>Critical effects chances differ from ability to ability, so see ability classes in <code>abilities.py</code>.</p>
      <h2>Derived stats</h2>
      <p>Derived stats are not stored, they are calculated on demand. Usually because they are randomized.</p>
      <p>Accuracy is calculated on the go every time it's needed, so just see the method <code>get_accuracy</code> of <code>Creature</code> in <code>creatures.py</code>.
      The basic formula:</p>
      <pre><code>base_accuracy = diceroll( str(2*intelligence) + "d" + str(2*dexterity") )
      accuracy = base_accuracy + weapon_accuracy + sum_of_equipment_accuracy + sum_of_modifier_accuracy + sum_of_perks_accuracy
      </code></pre>
      <p>Defence, see <code>defence</code> property of <code>Creature</code>:</p>
      <pre><code>base_defence = diceroll("1d1")
      defence = base_defence +  sum_of_equipment_defence + sum_of_modifier_defence + sum_of_perks_defence 
      </code></pre>
      <p>Evasion, see <code>evasion</code> property of <code>Creature</code>:</p>
      <pre><code>base_evasion = diceroll(str(["dexterity"])+"d6")
      evasion = base_evasion +  sum_of_equipment_evasion + sum_of_modifier_evasion + sum_of_perks_evasion 
      </code></pre>


      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Euphe/dungeon_bot">Dungeon bot</a> is maintained by <a href="https://github.com/Euphe">Euphe</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
